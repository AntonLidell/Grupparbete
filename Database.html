<!DOCTYPE html>		
<html lang="en">		
    <head>				 
        <meta charset="utf-8">	 
        <title>Javascript</title>	
         <!--lÃ¤nken till css filen-->
         <link rel="stylesheet" type="text/css" href="grupparbete.css">
         <script src="plotly-latest.min.js"></script>
         <script type = "text/javascript" src="Healthcare.json"></script>
         <script type = "text/javascript" src="Sick_data.json"></script>
    </head>
    <body>

        <div id="histogram_price"></div>

        <button onclick="displayDate()">Change is gonna come</button>

        <script src="dist/alasql.js"></script>
        <script>
            /*
            var db = new alasql.Database("database_test");

            db.exec("CREATE TABLE example (a INT, b INT)");

            // You can insert data directly from javascript object...
            db.tables.example.data = [ 
                {a:5,b:6},
                {a:3,b:4}
            ];

            // ...or you can insert data with normal SQL 
            db.exec("INSERT INTO example VALUES (1,3)");

            var res = db.exec("SELECT * FROM example ORDER BY b DESC");
            console.table(res);
            // res now contains this array of objects:
            // [{a:1,b:3},{a:3,b:4},{a:3,b:4}]

            
            alasql("Create database test_database");
            alasql("use test_database");
            alasql("CREATE TABLE test (language INT, hello STRING)");
            alasql("INSERT INTO test VALUES (1,'Hello!')");
            console.table(alasql("SELECT hello FROM test WHERE language > 1"));
            text_var = alasql("SELECT language FROM test WHERE language > 1");
            */

            alasql("Create database test_database");
            alasql("use test_database");
            alasql("CREATE TABLE test (year int, diagnos string, antal float)");

            /*
            diagnos_var = [];
            for (var i = 0; i < data_sick.length; i++) {
                if (toString(data_sick[i].diagnoskapitel_kod) !== null) {
                    diagnos_var.push(data_sick[i].diagnoskapitel_kod);
                }
                else {
                    diagnos_var.push(" ");
                }
            }
            */

            for (var i = 0; i < data_sick.length; i++) {
                    alasql("INSERT INTO test VALUES ("+ Number(data_sick[i].ar) + ",'" 
                    + data_sick[i].diagnoskapitel_kod + "','"
                    + Number(data_sick[i].antal) + "')");
            }
            
            text_var = alasql("SELECT * FROM test");
            text_list = [];
            review_var = [];
            for (var i = 0; i < text_var.length; i++)  {
                text_list.push(text_var[i]["year"]);
                review_var.push(text_var[i]["antal"]);
            }
            document.write(text_list);
            
            var data_histo_price = [{
            x: text_list,
            y: review_var,
            mode: 'markers',
            type: 'scatter',
            }];

            var layout_price = {
                title: "Historigram Price",
                xaxis: {title: "Price"},
                yaxis: {title: "Count"},
            }

            histo_price = document.getElementById('histogram_price');  
            Plotly.plot(histo_price, data_histo_price, layout_price);  


            function displayDate() {
                text_var = alasql("SELECT * FROM test WHERE year = 2006");
                text_list = [];
                review_var = [];
                for (var i = 0; i < text_var.length; i++)  {
                    text_list.push(text_var[i]["year"]);
                    review_var.push(text_var[i]["antal"]);
                }

                var data_histo_price = [{
                x: text_list,
                y: review_var,
                mode: 'markers',
                type: 'scatter',
                }];

                histo_price = document.getElementById('histogram_price');               
                Plotly.react(histo_price, data_histo_price, layout_price);                   
                }
        </script>
    </body>
</html>